# Руководство по файлу .env

## Формат файла .env

Файл `.env` должен находиться в корне проекта и иметь следующий формат:

```env
# Комментарии начинаются с #
# Пустые строки игнорируются

# HH.ru API Configuration
HH_ACCESS_TOKEN=ваш_токен_здесь

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=ваш_токен_бота
TELEGRAM_CHAT_ID=ваш_chat_id
TELEGRAM_ENABLED=true

# Proxy Configuration (optional)
PROXY_ENABLED=false
PROXY_HOST=
PROXY_PORT=

# Ollama Configuration (defaults)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=qwen2.5:7b

# Database Configuration (defaults)
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/hh_assistant
SPRING_DATASOURCE_USERNAME=hh_user
SPRING_DATASOURCE_PASSWORD=hh_pass
```

## Правила форматирования

1. **Формат**: `KEY=value` (без пробелов вокруг `=`)
2. **Кавычки**: Не нужны, даже если значение содержит пробелы
3. **Комментарии**: Начинаются с `#`
4. **Пустые строки**: Игнорируются
5. **Пробелы**: В начале и конце значения сохраняются (если не нужны - не добавляйте)

## Примеры

### ✅ Правильно:
```env
HH_ACCESS_TOKEN=abc123xyz
TELEGRAM_BOT_TOKEN=123456:ABC-DEF
TELEGRAM_CHAT_ID=1126891709
```

### ❌ Неправильно:
```env
HH_ACCESS_TOKEN = abc123xyz  # Пробелы вокруг =
HH_ACCESS_TOKEN="abc123xyz"  # Кавычки не нужны
HH_ACCESS_TOKEN=abc 123 xyz  # Пробелы в значении (если не нужны)
```

## Как приложение загружает .env

Приложение автоматически загружает переменные из `.env` файла при запуске:

1. Файл `.env` должен находиться в корне проекта (рядом с `build.gradle.kts`)
2. Приложение использует библиотеку `dotenv-java` для загрузки
3. Если файл `.env` отсутствует, используются значения по умолчанию из `application.yml`
4. Переменные из `.env` имеют приоритет над значениями по умолчанию

## Проверка загрузки переменных

После запуска приложения можно проверить, что переменные загружены:

1. Откройте логи приложения
2. Проверьте, что нет ошибок загрузки `.env`
3. Проверьте health check: `http://localhost:8080/actuator/health`

## Важные замечания

1. **Безопасность**: Файл `.env` находится в `.gitignore` и не должен попадать в репозиторий
2. **Чувствительность к регистру**: Имена переменных чувствительны к регистру (`HH_ACCESS_TOKEN` ≠ `hh_access_token`)
3. **Пустые значения**: Если переменная пустая (`KEY=`), она будет загружена как пустая строка
4. **Многострочные значения**: Не поддерживаются напрямую, используйте одну строку

## Решение проблем

### Проблема: Переменные не загружаются

**Решение:**
- Убедитесь, что файл `.env` находится в корне проекта
- Проверьте формат файла (нет пробелов вокруг `=`)
- Проверьте, что нет синтаксических ошибок
- Перезапустите приложение

### Проблема: Ошибка при загрузке .env

**Решение:**
- Проверьте кодировку файла (должна быть UTF-8)
- Убедитесь, что нет специальных символов в именах переменных
- Проверьте, что все строки заканчиваются правильно (LF или CRLF)

### Проблема: Значения не применяются

**Решение:**
- Убедитесь, что имя переменной точно совпадает с тем, что используется в `application.yml`
- Проверьте, что нет опечаток в именах переменных
- Убедитесь, что приложение перезапущено после изменения `.env`
